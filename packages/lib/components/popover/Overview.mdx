import { Canvas, Meta, Source, Subtitle, Title } from "@storybook/blocks";

import * as stories from "./popover.stories";

<Meta of={stories} />

<Title />
<Subtitle>
  A popover is a non-modal dialog that appears above the content on the screen without losing the context of their original view.
  It can contain rich data such as text, selection controls, and buttons. A popover is used with a clickable trigger element and
  should position itself relative to where there is free space on the screen.
</Subtitle>

## How to get started
Start by importing the component.
``` ts
// Web component
import '@computas/designsystem/popover';

// React
import { CxPopover } from '@computas/designsystem/popover/react';
```

## Browser support
The popover component uses the new [Anchor Position API](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_anchor_positioning/Using)
to position the popover relative to the trigger. This API is not supported in Safari and Firefox as of 22th February 2025. If you want to support
all major browsers, please include the official anchor position API polyfill in the `<head>` of your document:
``` html
<script type="module">
  if (!("anchorName" in document.documentElement.style)) {
    import("https://unpkg.com/@oddbird/css-anchor-positioning");
  }
</script>
```
Read more about this polyfill [here](https://github.com/oddbird/css-anchor-positioning).

## Default
A popover requires a clickable element to act as the trigger for opening/closing the popover. This trigger is registered through the "trigger"
slot by adding the attribute `slot="trigger"`. The remaining content inside the `cx-popover` element is placed into the popover as its content.
<Canvas of={stories.Default} />

## With header
Add a `header` attribute to the `cx-popover` to display a header.
<Canvas of={stories.WithHeader} />

## Autofocus
By default, the popover does not move focus into the popover when it opens. To automatically move the focus into the popover when it opens, 
simply add the `autofocus` attribute.
<Canvas of={stories.Autofocus} />

## Close popover on click
If you want to close the popover from within the popover itself, add the attribute `[data-cx-popover-close]` to the element that should close the popover when clicked.
<Canvas of={stories.CloseOnClick} />

## Events
The popover emits an event `open` (`onOpen` in React) when opened, and `close` (`onClose` in React) when closed.
